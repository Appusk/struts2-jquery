'use strict';(function(a){var b={};a.jgrid.extend({searchGrid:function(b){b=a.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",
showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"\x3d",ne:"\x3c\x3e",lt:"\x3c",le:"\x3c\x3d",gt:"\x3e",ge:"\x3e\x3d",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},a.jgrid.search,b||{});return this.each(function(){function d(c){w=a(e).triggerHandler("jqGridFilterBeforeShow",
[c]);void 0===w&&(w=!0);w&&a.isFunction(b.beforeShowSearch)&&(w=b.beforeShowSearch.call(e,c));w&&(a.jgrid.viewModal("#"+a.jgrid.jqID(t.themodal),{gbox:"#gbox_"+a.jgrid.jqID(k),jqm:b.jqModal,modal:b.modal,overlay:b.overlay,toTop:b.toTop}),a(e).triggerHandler("jqGridFilterAfterShow",[c]),a.isFunction(b.afterShowSearch)&&b.afterShowSearch.call(e,c))}var e=this;if(e.grid){var k="fbox_"+e.p.id,w=!0,p=!0,t={themodal:"searchmod"+k,modalhead:"searchhd"+k,modalcontent:"searchcnt"+k,scrollelm:k},m=e.p.postData[b.sFilter],
f;"string"===typeof m&&(m=a.jgrid.parse(m));!0===b.recreateFilter&&a("#"+a.jgrid.jqID(t.themodal)).remove();if(void 0!==a("#"+a.jgrid.jqID(t.themodal))[0])d(a("#fbox_"+a.jgrid.jqID(+e.p.id)));else{var g=a("\x3cdiv\x3e\x3cdiv id\x3d'"+k+"' class\x3d'searchFilter' style\x3d'overflow:auto'\x3e\x3c/div\x3e\x3c/div\x3e").insertBefore("#gview_"+a.jgrid.jqID(e.p.id)),q="left",x="";"rtl"===e.p.direction&&(q="right",x=" style\x3d'text-align:left'",g.attr("dir","rtl"));var c=a.extend([],e.p.colModel),v="\x3ca id\x3d'"+
k+"_search' class\x3d'fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'\x3e\x3cspan class\x3d'ui-icon ui-icon-search'\x3e\x3c/span\x3e"+b.Find+"\x3c/a\x3e",h="\x3ca id\x3d'"+k+"_reset' class\x3d'fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'\x3e\x3cspan class\x3d'ui-icon ui-icon-arrowreturnthick-1-w'\x3e\x3c/span\x3e"+b.Reset+"\x3c/a\x3e",r="",n="",u,y=!1,C=-1;b.showQuery&&(r="\x3ca id\x3d'"+k+"_query' class\x3d'fm-button ui-state-default ui-corner-all fm-button-icon-left'\x3e\x3cspan class\x3d'ui-icon ui-icon-comment'\x3e\x3c/span\x3eQuery\x3c/a\x3e");
b.columns.length?(c=b.columns,C=0,u=c[0].index||c[0].name):a.each(c,function(a,b){b.label||(b.label=e.p.colNames[a]);if(!y){var c=void 0===b.search?!0:b.search,d=!0===b.hidden;if(b.searchoptions&&!0===b.searchoptions.searchhidden&&c||c&&!d)y=!0,u=b.index||b.name,C=a}});if(!m&&u||!1===b.multipleSearch){var A="eq";0<=C&&c[C].searchoptions&&c[C].searchoptions.sopt?A=c[C].searchoptions.sopt[0]:b.sopt&&b.sopt.length&&(A=b.sopt[0]);m={groupOp:"AND",rules:[{field:u,op:A,data:""}]}}y=!1;b.tmplNames&&b.tmplNames.length&&
(y=!0,n=b.tmplLabel,n+="\x3cselect class\x3d'ui-template'\x3e",n+="\x3coption value\x3d'default'\x3eDefault\x3c/option\x3e",a.each(b.tmplNames,function(a,b){n+="\x3coption value\x3d'"+a+"'\x3e"+b+"\x3c/option\x3e"}),n+="\x3c/select\x3e");q="\x3ctable class\x3d'EditTable' style\x3d'border:0px none;margin-top:5px' id\x3d'"+k+"_2'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3chr class\x3d'ui-widget-content' style\x3d'margin:1px'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd class\x3d'EditButton' style\x3d'text-align:"+
q+"'\x3e"+h+n+"\x3c/td\x3e\x3ctd class\x3d'EditButton' "+x+"\x3e"+r+v+"\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e";k=a.jgrid.jqID(k);a("#"+k).jqFilter({columns:c,filter:b.loadDefaults?m:null,showQuery:b.showQuery,errorcheck:b.errorcheck,sopt:b.sopt,groupButton:b.multipleGroup,ruleButtons:b.multipleSearch,afterRedraw:b.afterRedraw,ops:b.odata,operands:b.operands,ajaxSelectOptions:e.p.ajaxSelectOptions,groupOps:b.groupOps,onChange:function(){this.p.showQuery&&a(".query",this).html(this.toUserFriendlyString());
a.isFunction(b.afterChange)&&b.afterChange.call(e,a("#"+k),b)},direction:e.p.direction,id:e.p.id});g.append(q);y&&b.tmplFilters&&b.tmplFilters.length&&a(".ui-template",g).bind("change",function(){var c=a(this).val();"default"===c?a("#"+k).jqFilter("addFilter",m):a("#"+k).jqFilter("addFilter",b.tmplFilters[parseInt(c,10)]);return!1});!0===b.multipleGroup&&(b.multipleSearch=!0);a(e).triggerHandler("jqGridFilterInitialize",[a("#"+k)]);a.isFunction(b.onInitializeSearch)&&b.onInitializeSearch.call(e,a("#"+
k));b.gbox="#gbox_"+k;b.layer?a.jgrid.createModal(t,g,b,"#gview_"+a.jgrid.jqID(e.p.id),a("#gbox_"+a.jgrid.jqID(e.p.id))[0],"#"+a.jgrid.jqID(b.layer),{position:"relative"}):a.jgrid.createModal(t,g,b,"#gview_"+a.jgrid.jqID(e.p.id),a("#gbox_"+a.jgrid.jqID(e.p.id))[0]);(b.searchOnEnter||b.closeOnEscape)&&a("#"+a.jgrid.jqID(t.themodal)).keydown(function(c){var d=a(c.target);if(!(!b.searchOnEnter||13!==c.which||d.hasClass("add-group")||d.hasClass("add-rule")||d.hasClass("delete-group")||d.hasClass("delete-rule")||
d.hasClass("fm-button")&&d.is("[id$\x3d_query]")))return a("#"+k+"_search").click(),!1;if(b.closeOnEscape&&27===c.which)return a("#"+a.jgrid.jqID(t.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1});r&&a("#"+k+"_query").bind("click",function(){a(".queryresult",g).toggle();return!1});void 0===b.stringResult&&(b.stringResult=b.multipleSearch);a("#"+k+"_search").bind("click",function(){var c={},d,h;f=a("#"+k);f.find(".input-elm:focus").change();h=f.jqFilter("filterData");if(b.errorcheck&&(f[0].hideError(),
b.showQuery||f.jqFilter("toSQLString"),f[0].p.error))return f[0].showError(),!1;if(b.stringResult){try{d=xmlJsonClass.toJson(h,"","",!1)}catch(g){try{d=JSON.stringify(h)}catch(l){}}"string"===typeof d&&(c[b.sFilter]=d,a.each([b.sField,b.sValue,b.sOper],function(){c[this]=""}))}else b.multipleSearch?(c[b.sFilter]=h,a.each([b.sField,b.sValue,b.sOper],function(){c[this]=""})):(c[b.sField]=h.rules[0].field,c[b.sValue]=h.rules[0].data,c[b.sOper]=h.rules[0].op,c[b.sFilter]="");e.p.search=!0;a.extend(e.p.postData,
c);p=a(e).triggerHandler("jqGridFilterSearch");void 0===p&&(p=!0);p&&a.isFunction(b.onSearch)&&(p=b.onSearch.call(e,e.p.filters));!1!==p&&a(e).trigger("reloadGrid",[{page:1}]);b.closeAfterSearch&&a.jgrid.hideModal("#"+a.jgrid.jqID(t.themodal),{gb:"#gbox_"+a.jgrid.jqID(e.p.id),jqm:b.jqModal,onClose:b.onClose});return!1});a("#"+k+"_reset").bind("click",function(){var c={},d=a("#"+k);e.p.search=!1;e.p.resetsearch=!0;!1===b.multipleSearch?c[b.sField]=c[b.sValue]=c[b.sOper]="":c[b.sFilter]="";d[0].resetFilter();
y&&a(".ui-template",g).val("default");a.extend(e.p.postData,c);p=a(e).triggerHandler("jqGridFilterReset");void 0===p&&(p=!0);p&&a.isFunction(b.onReset)&&(p=b.onReset.call(e));!1!==p&&a(e).trigger("reloadGrid",[{page:1}]);b.closeAfterReset&&a.jgrid.hideModal("#"+a.jgrid.jqID(t.themodal),{gb:"#gbox_"+a.jgrid.jqID(e.p.id),jqm:b.jqModal,onClose:b.onClose});return!1});d(a("#"+k));a(".fm-button:not(.ui-state-disabled)",g).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},
editGridRow:function(z,d){d=a.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",
topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay",removemodal:!0,form:"edit"},a.jgrid.edit,d||{});b[a(this)[0].p.id]=d;return this.each(function(){function e(){a(n+" \x3e tbody \x3e tr \x3e td .FormElement").each(function(){var b=a(".customelement",this);if(b.length){var d=a(b[0]).attr("name");a.each(c.p.colModel,
function(){if(this.name===d&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{if(l[d]=this.editoptions.custom_value.call(c,a("#"+a.jgrid.jqID(d),n),"get"),void 0===l[d])throw"e1";}catch(b){"e1"===b?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,b.message,a.jgrid.edit.bClose)}return!0}})}else{switch(a(this).get(0).type){case "checkbox":a(this).is(":checked")?l[this.name]=
a(this).val():(b=a(this).attr("offval"),l[this.name]=b);break;case "select-one":l[this.name]=a("option:selected",this).val();break;case "select-multiple":l[this.name]=a(this).val();l[this.name]=l[this.name]?l[this.name].join(","):"";a("option:selected",this).each(function(b,c){a(c).text()});break;case "password":case "text":case "textarea":case "button":l[this.name]=a(this).val()}c.p.autoencode&&(l[this.name]=a.jgrid.htmlEncode(l[this.name]))}});return!0}function k(d,e,s,g){var l,f,n,k=0,m,u,q,r=
[],D=!1,z="",p;for(p=1;p<=g;p++)z+="\x3ctd class\x3d'CaptionTD'\x3e\x26#160;\x3c/td\x3e\x3ctd class\x3d'DataTD'\x3e\x26#160;\x3c/td\x3e";"_empty"!==d&&(D=a(e).jqGrid("getInd",d));a(e.p.colModel).each(function(p){l=this.name;u=(f=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style\x3d'display:none'":"";if("cb"!==l&&"subgrid"!==l&&!0===this.editable&&"rn"!==l){if(!1===D)m="";else if(l===e.p.ExpandColumn&&!0===e.p.treeGrid)m=a("td[role\x3d'gridcell']:eq("+p+")",e.rows[D]).text();
else{try{m=a.unformat.call(e,a("td[role\x3d'gridcell']:eq("+p+")",e.rows[D]),{rowId:d,colModel:this},p)}catch(w){m=this.edittype&&"textarea"===this.edittype?a("td[role\x3d'gridcell']:eq("+p+")",e.rows[D]).text():a("td[role\x3d'gridcell']:eq("+p+")",e.rows[D]).html()}if(!m||"\x26nbsp;"===m||"\x26#160;"===m||1===m.length&&160===m.charCodeAt(0))m=""}var t=a.extend({},this.editoptions||{},{id:l,name:l,rowId:d}),v=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),
y=parseInt(v.rowpos,10)||k+1,A=parseInt(2*(parseInt(v.colpos,10)||1),10);"_empty"===d&&t.defaultValue&&(m=a.isFunction(t.defaultValue)?t.defaultValue.call(c):t.defaultValue);this.edittype||(this.edittype="text");c.p.autoencode&&(m=a.jgrid.htmlDecode(m));q=a.jgrid.createEl.call(c,this.edittype,t,m,!1,a.extend({},a.jgrid.ajaxOptions,e.p.ajaxSelectOptions||{}));if(b[c.p.id].checkOnSubmit||b[c.p.id].checkOnUpdate)b[c.p.id]._savedData[l]=m;a(q).addClass("FormElement");-1<a.inArray(this.edittype,["text",
"textarea","password","select"])&&a(q).addClass("ui-widget-content ui-corner-all");n=a(s).find("tr[rowpos\x3d"+y+"]");if(v.rowabove){var C=a("\x3ctr\x3e\x3ctd class\x3d'contentinfo' colspan\x3d'"+2*g+"'\x3e"+v.rowcontent+"\x3c/td\x3e\x3c/tr\x3e");a(s).append(C);C[0].rp=y}0===n.length&&(n=a("\x3ctr "+u+" rowpos\x3d'"+y+"'\x3e\x3c/tr\x3e").addClass("FormData").attr("id","tr_"+l),a(n).append(z),a(s).append(n),n[0].rp=y);a("td:eq("+(A-2)+")",n[0]).html(void 0===v.label?e.p.colNames[p]:v.label);a("td:eq("+
(A-1)+")",n[0]).append(v.elmprefix).append(q).append(v.elmsuffix);"custom"===this.edittype&&a.isFunction(t.custom_value)&&t.custom_value.call(c,a("#"+l,"#"+h),"set",m);a.jgrid.bindEv.call(c,q,t);r[k]=p;k++}});0<k&&(p=a("\x3ctr class\x3d'FormData' style\x3d'display:none'\x3e\x3ctd class\x3d'CaptionTD'\x3e\x3c/td\x3e\x3ctd colspan\x3d'"+(2*g-1)+"' class\x3d'DataTD'\x3e\x3cinput class\x3d'FormElement' id\x3d'id_g' type\x3d'text' name\x3d'"+e.p.id+"_id' value\x3d'"+d+"'/\x3e\x3c/td\x3e\x3c/tr\x3e"),p[0].rp=
k+999,a(s).append(p),b[c.p.id].checkOnSubmit||b[c.p.id].checkOnUpdate)&&(b[c.p.id]._savedData[e.p.id+"_id"]=d);return r}function w(d,e,s){var l,h=0,g,f,m,k,u;if(b[c.p.id].checkOnSubmit||b[c.p.id].checkOnUpdate)b[c.p.id]._savedData={},b[c.p.id]._savedData[e.p.id+"_id"]=d;var p=e.p.colModel;if("_empty"===d)a(p).each(function(){l=this.name;m=a.extend({},this.editoptions||{});(f=a("#"+a.jgrid.jqID(l),"#"+s))&&f.length&&null!==f[0]&&(k="","custom"===this.edittype&&a.isFunction(m.custom_value)?m.custom_value.call(c,
a("#"+l,"#"+s),"set",k):m.defaultValue?(k=a.isFunction(m.defaultValue)?m.defaultValue.call(c):m.defaultValue,"checkbox"===f[0].type?(u=k.toLowerCase(),0>u.search(/(false|f|0|no|n|off|undefined)/i)&&""!==u?(f[0].checked=!0,f[0].defaultChecked=!0,f[0].value=k):(f[0].checked=!1,f[0].defaultChecked=!1)):f.val(k)):"checkbox"===f[0].type?(f[0].checked=!1,f[0].defaultChecked=!1,k=a(f).attr("offval")):f[0].type&&"select"===f[0].type.substr(0,6)?f[0].selectedIndex=0:f.val(k),!0===b[c.p.id].checkOnSubmit||
b[c.p.id].checkOnUpdate)&&(b[c.p.id]._savedData[l]=k)}),a("#id_g","#"+s).val(d);else{var q=a(e).jqGrid("getInd",d,!0);q&&(a('td[role\x3d"gridcell"]',q).each(function(f){l=p[f].name;if("cb"!==l&&"subgrid"!==l&&"rn"!==l&&!0===p[f].editable){if(l===e.p.ExpandColumn&&!0===e.p.treeGrid)g=a(this).text();else try{g=a.unformat.call(e,a(this),{rowId:d,colModel:p[f]},f)}catch(m){g="textarea"===p[f].edittype?a(this).text():a(this).html()}c.p.autoencode&&(g=a.jgrid.htmlDecode(g));if(!0===b[c.p.id].checkOnSubmit||
b[c.p.id].checkOnUpdate)b[c.p.id]._savedData[l]=g;l=a.jgrid.jqID(l);switch(p[f].edittype){case "password":case "text":case "button":case "image":case "textarea":if("\x26nbsp;"===g||"\x26#160;"===g||1===g.length&&160===g.charCodeAt(0))g="";a("#"+l,"#"+s).val(g);break;case "select":var k=g.split(","),k=a.map(k,function(b){return a.trim(b)});a("#"+l+" option","#"+s).each(function(){p[f].editoptions.multiple||a.trim(g)!==a.trim(a(this).text())&&k[0]!==a.trim(a(this).text())&&k[0]!==a.trim(a(this).val())?
p[f].editoptions.multiple?-1<a.inArray(a.trim(a(this).text()),k)||-1<a.inArray(a.trim(a(this).val()),k)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});break;case "checkbox":g=String(g);if(p[f].editoptions&&p[f].editoptions.value)if(p[f].editoptions.value.split(":")[0]===g)a("#"+l,"#"+s)[c.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0});else a("#"+l,"#"+s)[c.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1});else g=g.toLowerCase(),0>g.search(/(false|f|0|no|n|off|undefined)/i)&&
""!==g?(a("#"+l,"#"+s)[c.p.useProp?"prop":"attr"]("checked",!0),a("#"+l,"#"+s)[c.p.useProp?"prop":"attr"]("defaultChecked",!0)):(a("#"+l,"#"+s)[c.p.useProp?"prop":"attr"]("checked",!1),a("#"+l,"#"+s)[c.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case "custom":try{if(p[f].editoptions&&a.isFunction(p[f].editoptions.custom_value))p[f].editoptions.custom_value.call(c,a("#"+l,"#"+s),"set",g);else throw"e1";}catch(n){"e1"===n?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+
a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,n.message,a.jgrid.edit.bClose)}}h++}}),0<h&&a("#id_g",n).val(d))}}function p(){a.each(c.p.colModel,function(a,b){b.editoptions&&!0===b.editoptions.NullIfEmpty&&l.hasOwnProperty(b.name)&&""===l[b.name]&&(l[b.name]="null")})}function t(){var e,f=[!0,"",""],s={},g=c.p.prmNames,m,k,q,D,r,t=a(c).triggerHandler("jqGridAddEditBeforeCheckValues",[a("#"+h),B]);t&&"object"===typeof t&&(l=t);a.isFunction(b[c.p.id].beforeCheckValues)&&
(t=b[c.p.id].beforeCheckValues.call(c,l,a("#"+h),B))&&"object"===typeof t&&(l=t);for(q in l)if(l.hasOwnProperty(q)&&(f=a.jgrid.checkValues.call(c,l[q],q),!1===f[0]))break;p();f[0]&&(s=a(c).triggerHandler("jqGridAddEditClickSubmit",[b[c.p.id],l,B]),void 0===s&&a.isFunction(b[c.p.id].onclickSubmit)&&(s=b[c.p.id].onclickSubmit.call(c,b[c.p.id],l,B)||{}),f=a(c).triggerHandler("jqGridAddEditBeforeSubmit",[l,a("#"+h),B]),void 0===f&&(f=[!0,"",""]),f[0]&&a.isFunction(b[c.p.id].beforeSubmit)&&(f=b[c.p.id].beforeSubmit.call(c,
l,a("#"+h),B)));if(f[0]&&!b[c.p.id].processing){b[c.p.id].processing=!0;a("#sData",n+"_2").addClass("ui-state-active");q=b[c.p.id].url||a(c).jqGrid("getGridParam","editurl");k=g.oper;m="clientArray"===q?c.p.keyName:g.id;l[k]="_empty"===a.trim(l[c.p.id+"_id"])?g.addoper:g.editoper;l[k]!==g.addoper?l[m]=l[c.p.id+"_id"]:void 0===l[m]&&(l[m]=l[c.p.id+"_id"]);delete l[c.p.id+"_id"];l=a.extend(l,b[c.p.id].editData,s);if(!0===c.p.treeGrid)for(r in l[k]===g.addoper&&(D=a(c).jqGrid("getGridParam","selrow"),
l["adjacency"===c.p.treeGridModel?c.p.treeReader.parent_id_field:"parent_id"]=D),c.p.treeReader)c.p.treeReader.hasOwnProperty(r)&&(s=c.p.treeReader[r],!l.hasOwnProperty(s)||l[k]===g.addoper&&"parent_id_field"===r||delete l[s]);l[m]=a.jgrid.stripPref(c.p.idPrefix,l[m]);r=a.extend({url:q,type:b[c.p.id].mtype,data:a.isFunction(b[c.p.id].serializeEditData)?b[c.p.id].serializeEditData.call(c,l):l,complete:function(s,p){var q;a("#sData",n+"_2").removeClass("ui-state-active");l[m]=c.p.idPrefix+l[m];300<=
s.status&&304!==s.status?(f[0]=!1,f[1]=a(c).triggerHandler("jqGridAddEditErrorTextFormat",[s,B]),a.isFunction(b[c.p.id].errorTextFormat)?f[1]=b[c.p.id].errorTextFormat.call(c,s,B):f[1]=p+" Status: '"+s.statusText+"'. Error code: "+s.status):(f=a(c).triggerHandler("jqGridAddEditAfterSubmit",[s,l,B]),void 0===f&&(f=[!0,"",""]),f[0]&&a.isFunction(b[c.p.id].afterSubmit)&&(f=b[c.p.id].afterSubmit.call(c,s,l,B)));if(!1===f[0])a("#FormError\x3etd",n).html(f[1]),a("#FormError",n).show();else if(c.p.autoencode&&
a.each(l,function(b,c){l[b]=a.jgrid.htmlDecode(c)}),l[k]===g.addoper?(f[2]||(f[2]=a.jgrid.randId()),null==l[m]?l[m]=f[2]:f[2]=l[m],b[c.p.id].reloadAfterSubmit?a(c).trigger("reloadGrid"):!0===c.p.treeGrid?a(c).jqGrid("addChildNode",f[2],D,l):a(c).jqGrid("addRowData",f[2],l,d.addedrow),b[c.p.id].closeAfterAdd?(!0!==c.p.treeGrid&&a(c).jqGrid("setSelection",f[2]),a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),{gb:"#gbox_"+a.jgrid.jqID(v),jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,
formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form})):b[c.p.id].clearAfterAdd&&w("_empty",c,h)):(b[c.p.id].reloadAfterSubmit?(a(c).trigger("reloadGrid"),b[c.p.id].closeAfterEdit||setTimeout(function(){a(c).jqGrid("setSelection",l[m])},1E3)):!0===c.p.treeGrid?a(c).jqGrid("setTreeRow",l[m],l):a(c).jqGrid("setRowData",l[m],l),b[c.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),{gb:"#gbox_"+a.jgrid.jqID(v),jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,
formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form})),a.isFunction(b[c.p.id].afterComplete)&&(e=s,setTimeout(function(){a(c).triggerHandler("jqGridAddEditAfterComplete",[e,l,a("#"+h),B]);b[c.p.id].afterComplete.call(c,e,l,a("#"+h),B);e=null},500)),b[c.p.id].checkOnSubmit||b[c.p.id].checkOnUpdate)if(a("#"+h).data("disabled",!1),"_empty"!==b[c.p.id]._savedData[c.p.id+"_id"])for(q in b[c.p.id]._savedData)b[c.p.id]._savedData.hasOwnProperty(q)&&l[q]&&(b[c.p.id]._savedData[q]=l[q]);b[c.p.id].processing=
!1;try{a(":input:visible","#"+h)[0].focus()}catch(r){}}},a.jgrid.ajaxOptions,b[c.p.id].ajaxEditOptions);r.url||b[c.p.id].useDataProxy||(a.isFunction(c.p.dataProxy)?b[c.p.id].useDataProxy=!0:(f[0]=!1,f[1]+=" "+a.jgrid.errors.nourl));f[0]&&(b[c.p.id].useDataProxy?(s=c.p.dataProxy.call(c,r,"set_"+c.p.id),void 0===s&&(s=[!0,""]),!1===s[0]?(f[0]=!1,f[1]=s[1]||"Error deleting the selected row!"):(r.data.oper===g.addoper&&b[c.p.id].closeAfterAdd&&a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),{gb:"#gbox_"+
a.jgrid.jqID(v),jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form}),r.data.oper===g.editoper&&b[c.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),{gb:"#gbox_"+a.jgrid.jqID(v),jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form}))):"clientArray"===r.url?(b[c.p.id].reloadAfterSubmit=!1,l=r.data,r.complete({status:200,statusText:""},
"")):a.ajax(r))}!1===f[0]&&(a("#FormError\x3etd",n).html(f[1]),a("#FormError",n).show())}function m(a,b){var c=!1,d;for(d in a)if(a.hasOwnProperty(d)&&a[d]!=b[d]){c=!0;break}return c}function f(){var d=!0;a("#FormError",n).hide();b[c.p.id].checkOnUpdate&&(l={},e(),M=m(l,b[c.p.id]._savedData))&&(a("#"+h).data("disabled",!0),a(".confirm","#"+u.themodal).show(),d=!1);return d}function g(){var b;if("_empty"!==z&&void 0!==c.p.savedRow&&0<c.p.savedRow.length&&a.isFunction(a.fn.jqGrid.restoreRow))for(b=
0;b<c.p.savedRow.length;b++)if(c.p.savedRow[b].id==z){a(c).jqGrid("restoreRow",z);break}}function q(b,c){var d=c[1].length-1;0===b?a("#pData",n+"_2").addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",n+"_2").addClass("ui-state-disabled"):a("#pData",n+"_2").removeClass("ui-state-disabled");b===d?a("#nData",n+"_2").addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",
n+"_2").addClass("ui-state-disabled"):a("#nData",n+"_2").removeClass("ui-state-disabled")}function x(){var b=a(c).jqGrid("getDataIDs"),d=a("#id_g",n).val();return[a.inArray(d,b),b]}var c=this;if(c.grid&&z){var v=c.p.id,h="FrmGrid_"+v,r="TblGrid_"+v,n="#"+a.jgrid.jqID(r),u={themodal:"editmod"+v,modalhead:"edithd"+v,modalcontent:"editcnt"+v,scrollelm:h},y=a.isFunction(b[c.p.id].beforeShowForm)?b[c.p.id].beforeShowForm:!1,C=a.isFunction(b[c.p.id].afterShowForm)?b[c.p.id].afterShowForm:!1,A=a.isFunction(b[c.p.id].beforeInitData)?
b[c.p.id].beforeInitData:!1,E=a.isFunction(b[c.p.id].onInitializeForm)?b[c.p.id].onInitializeForm:!1,s=!0,D=1,I=0,l,M,B,h=a.jgrid.jqID(h);"new"===z?(z="_empty",B="add",d.caption=b[c.p.id].addCaption):(d.caption=b[c.p.id].editCaption,B="edit");d.recreateForm||a(c).data("formProp")&&a.extend(b[a(this)[0].p.id],a(c).data("formProp"));var N=!0;d.checkOnUpdate&&d.jqModal&&!d.modal&&(N=!1);var F=isNaN(b[a(this)[0].p.id].dataheight)?b[a(this)[0].p.id].dataheight:b[a(this)[0].p.id].dataheight+"px",s=isNaN(b[a(this)[0].p.id].datawidth)?
b[a(this)[0].p.id].datawidth:b[a(this)[0].p.id].datawidth+"px",F=a("\x3cform name\x3d'FormPost' id\x3d'"+h+"' class\x3d'FormGrid' onSubmit\x3d'return false;' style\x3d'width:"+s+";overflow:auto;position:relative;height:"+F+";'\x3e\x3c/form\x3e").data("disabled",!1),G=a("\x3ctable id\x3d'"+r+"' class\x3d'EditTable' cellspacing\x3d'0' cellpadding\x3d'0' border\x3d'0'\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e");a(c.p.colModel).each(function(){var a=this.formoptions;D=Math.max(D,a?a.colpos||0:0);I=
Math.max(I,a?a.rowpos||0:0)});a(F).append(G);s=a("\x3ctr id\x3d'FormError' style\x3d'display:none'\x3e\x3ctd class\x3d'ui-state-error' colspan\x3d'"+2*D+"'\x3e\x3c/td\x3e\x3c/tr\x3e");s[0].rp=0;a(G).append(s);s=a("\x3ctr style\x3d'display:none' class\x3d'tinfo'\x3e\x3ctd class\x3d'topinfo' colspan\x3d'"+2*D+"'\x3e"+b[c.p.id].topinfo+"\x3c/td\x3e\x3c/tr\x3e");s[0].rp=0;a(G).append(s);s=a(c).triggerHandler("jqGridAddEditBeforeInitData",[F,B]);void 0===s&&(s=!0);s&&A&&(s=A.call(c,F,B));if(!1!==s){g();
var s=(A="rtl"===c.p.direction?!0:!1)?"nData":"pData",H=A?"pData":"nData";k(z,c,G,D);var s="\x3ca id\x3d'"+s+"' class\x3d'fm-button ui-state-default ui-corner-left'\x3e\x3cspan class\x3d'ui-icon ui-icon-triangle-1-w'\x3e\x3c/span\x3e\x3c/a\x3e",H="\x3ca id\x3d'"+H+"' class\x3d'fm-button ui-state-default ui-corner-right'\x3e\x3cspan class\x3d'ui-icon ui-icon-triangle-1-e'\x3e\x3c/span\x3e\x3c/a\x3e",J="\x3ca id\x3d'sData' class\x3d'fm-button ui-state-default ui-corner-all'\x3e"+d.bSubmit+"\x3c/a\x3e",
K="\x3ca id\x3d'cData' class\x3d'fm-button ui-state-default ui-corner-all'\x3e"+d.bCancel+"\x3c/a\x3e",r="\x3ctable border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0' class\x3d'EditTable' id\x3d'"+r+"_2'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3chr class\x3d'ui-widget-content' style\x3d'margin:1px'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr id\x3d'Act_Buttons'\x3e\x3ctd class\x3d'navButton'\x3e"+(A?H+s:s+H)+"\x3c/td\x3e\x3ctd class\x3d'EditButton'\x3e"+J+K+"\x3c/td\x3e\x3c/tr\x3e"+("\x3ctr style\x3d'display:none' class\x3d'binfo'\x3e\x3ctd class\x3d'bottominfo' colspan\x3d'2'\x3e"+
b[c.p.id].bottominfo+"\x3c/td\x3e\x3c/tr\x3e"),r=r+"\x3c/tbody\x3e\x3c/table\x3e";if(0<I){var L=[];a.each(a(G)[0].rows,function(a,b){L[a]=b});L.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(L,function(b,c){a("tbody",G).append(c)})}d.gbox="#gbox_"+a.jgrid.jqID(v);var O=!1;!0===d.closeOnEscape&&(d.closeOnEscape=!1,O=!0);r=a("\x3cdiv\x3e\x3c/div\x3e").append(F).append(r);a.jgrid.createModal(u,r,b[a(this)[0].p.id],"#gview_"+a.jgrid.jqID(c.p.id),a("#gbox_"+a.jgrid.jqID(c.p.id))[0]);A&&
(a("#pData, #nData",n+"_2").css("float","right"),a(".EditButton",n+"_2").css("text-align","left"));b[c.p.id].topinfo&&a(".tinfo",n).show();b[c.p.id].bottominfo&&a(".binfo",n+"_2").show();r=r=null;a("#"+a.jgrid.jqID(u.themodal)).keydown(function(e){var s=e.target;if(!0===a("#"+h).data("disabled"))return!1;if(!0===b[c.p.id].savekey[0]&&e.which===b[c.p.id].savekey[1]&&"TEXTAREA"!==s.tagName)return a("#sData",n+"_2").trigger("click"),!1;if(27===e.which){if(!f())return!1;O&&a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),
{gb:d.gbox,jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form});return!1}if(!0===b[c.p.id].navkeys[0]){if("_empty"===a("#id_g",n).val())return!0;if(e.which===b[c.p.id].navkeys[1])return a("#pData",n+"_2").trigger("click"),!1;if(e.which===b[c.p.id].navkeys[2])return a("#nData",n+"_2").trigger("click"),!1}});d.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span","#"+a.jgrid.jqID(u.themodal)).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close",
"#"+a.jgrid.jqID(u.themodal)).unbind("click").click(function(){if(!f())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),{gb:"#gbox_"+a.jgrid.jqID(v),jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form});return!1}));d.saveicon=a.extend([!0,"left","ui-icon-disk"],d.saveicon);d.closeicon=a.extend([!0,"left","ui-icon-close"],d.closeicon);!0===d.saveicon[0]&&a("#sData",n+"_2").addClass("right"===d.saveicon[1]?"fm-button-icon-right":
"fm-button-icon-left").append("\x3cspan class\x3d'ui-icon "+d.saveicon[2]+"'\x3e\x3c/span\x3e");!0===d.closeicon[0]&&a("#cData",n+"_2").addClass("right"===d.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("\x3cspan class\x3d'ui-icon "+d.closeicon[2]+"'\x3e\x3c/span\x3e");if(b[c.p.id].checkOnSubmit||b[c.p.id].checkOnUpdate)J="\x3ca id\x3d'sNew' class\x3d'fm-button ui-state-default ui-corner-all' style\x3d'z-index:1002'\x3e"+d.bYes+"\x3c/a\x3e",H="\x3ca id\x3d'nNew' class\x3d'fm-button ui-state-default ui-corner-all' style\x3d'z-index:1002'\x3e"+
d.bNo+"\x3c/a\x3e",K="\x3ca id\x3d'cNew' class\x3d'fm-button ui-state-default ui-corner-all' style\x3d'z-index:1002'\x3e"+d.bExit+"\x3c/a\x3e",r=d.zIndex||999,r++,a("\x3cdiv class\x3d'"+d.overlayClass+" jqgrid-overlay confirm' style\x3d'z-index:"+r+";display:none;'\x3e\x26#160;\x3c/div\x3e\x3cdiv class\x3d'confirm ui-widget-content ui-jqconfirm' style\x3d'z-index:"+(r+1)+"'\x3e"+d.saveData+"\x3cbr/\x3e\x3cbr/\x3e"+J+H+K+"\x3c/div\x3e").insertAfter("#"+h),a("#sNew","#"+a.jgrid.jqID(u.themodal)).click(function(){t();
a("#"+h).data("disabled",!1);a(".confirm","#"+a.jgrid.jqID(u.themodal)).hide();return!1}),a("#nNew","#"+a.jgrid.jqID(u.themodal)).click(function(){a(".confirm","#"+a.jgrid.jqID(u.themodal)).hide();a("#"+h).data("disabled",!1);setTimeout(function(){a(":input:visible","#"+h)[0].focus()},0);return!1}),a("#cNew","#"+a.jgrid.jqID(u.themodal)).click(function(){a(".confirm","#"+a.jgrid.jqID(u.themodal)).hide();a("#"+h).data("disabled",!1);a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),{gb:"#gbox_"+a.jgrid.jqID(v),
jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form});return!1});a(c).triggerHandler("jqGridAddEditInitializeForm",[a("#"+h),B]);E&&E.call(c,a("#"+h),B);"_empty"!==z&&b[c.p.id].viewPagerButtons?a("#pData,#nData",n+"_2").show():a("#pData,#nData",n+"_2").hide();a(c).triggerHandler("jqGridAddEditBeforeShowForm",[a("#"+h),B]);y&&y.call(c,a("#"+h),B);a("#"+a.jgrid.jqID(u.themodal)).data("onClose",b[c.p.id].onClose);a.jgrid.viewModal("#"+
a.jgrid.jqID(u.themodal),{gbox:"#gbox_"+a.jgrid.jqID(v),jqm:d.jqModal,overlay:d.overlay,modal:d.modal,overlayClass:d.overlayClass,onHide:function(b){var d=a("#editmod"+v)[0].style.height;-1<d.indexOf("px")&&(d=parseFloat(d));a(c).data("formProp",{top:parseFloat(a(b.w).css("top")),left:parseFloat(a(b.w).css("left")),width:a(b.w).width(),height:d,dataheight:a("#"+h).height(),datawidth:a("#"+h).width()});b.w.remove();b.o&&b.o.remove()}});N||a("."+a.jgrid.jqID(d.overlayClass)).click(function(){if(!f())return!1;
a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),{gb:"#gbox_"+a.jgrid.jqID(v),jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form});return!1});a(".fm-button","#"+a.jgrid.jqID(u.themodal)).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a("#sData",n+"_2").click(function(){l={};a("#FormError",n).hide();e();"_empty"===l[c.p.id+"_id"]?t():!0===d.checkOnSubmit?(M=m(l,b[c.p.id]._savedData))?
(a("#"+h).data("disabled",!0),a(".confirm","#"+a.jgrid.jqID(u.themodal)).show()):t():t();return!1});a("#cData",n+"_2").click(function(){if(!f())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(u.themodal),{gb:"#gbox_"+a.jgrid.jqID(v),jqm:d.jqModal,onClose:b[c.p.id].onClose,removemodal:b[c.p.id].removemodal,formprop:!b[c.p.id].recreateForm,form:b[c.p.id].form});return!1});a("#nData",n+"_2").click(function(){if(!f())return!1;a("#FormError",n).hide();var b=x();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+
1]){a(c).triggerHandler("jqGridAddEditClickPgButtons",["next",a("#"+h),b[1][b[0]]]);var e;if(a.isFunction(d.onclickPgButtons)&&(e=d.onclickPgButtons.call(c,"next",a("#"+h),b[1][b[0]]),void 0!==e&&!1===e)||a("#"+a.jgrid.jqID(b[1][b[0]+1])).hasClass("ui-state-disabled"))return!1;w(b[1][b[0]+1],c,h);a(c).jqGrid("setSelection",b[1][b[0]+1]);a(c).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",a("#"+h),b[1][b[0]]]);a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(c,"next",a("#"+
h),b[1][b[0]+1]);q(b[0]+1,b)}return!1});a("#pData",n+"_2").click(function(){if(!f())return!1;a("#FormError",n).hide();var b=x();if(-1!==b[0]&&b[1][b[0]-1]){a(c).triggerHandler("jqGridAddEditClickPgButtons",["prev",a("#"+h),b[1][b[0]]]);var e;if(a.isFunction(d.onclickPgButtons)&&(e=d.onclickPgButtons.call(c,"prev",a("#"+h),b[1][b[0]]),void 0!==e&&!1===e)||a("#"+a.jgrid.jqID(b[1][b[0]-1])).hasClass("ui-state-disabled"))return!1;w(b[1][b[0]-1],c,h);a(c).jqGrid("setSelection",b[1][b[0]-1]);a(c).triggerHandler("jqGridAddEditAfterClickPgButtons",
["prev",a("#"+h),b[1][b[0]]]);a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(c,"prev",a("#"+h),b[1][b[0]-1]);q(b[0]-1,b)}return!1});a(c).triggerHandler("jqGridAddEditAfterShowForm",[a("#"+h),B]);C&&C.call(c,a("#"+h),B);y=x();q(y[0],y)}}})},viewGridRow:function(z,d){d=a.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,
beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},a.jgrid.view,d||{});b[a(this)[0].p.id]=d;return this.each(function(){function e(){!0!==b[m.p.id].closeOnEscape&&!0!==b[m.p.id].navkeys[0]||setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(v.modalhead)).attr("tabindex","-1").focus()},0)}function k(b,c,e,f){var g,m,h,k=0,n,p,q=[],r=!1,u,t="\x3ctd class\x3d'CaptionTD form-view-label ui-widget-content' width\x3d'"+d.labelswidth+"'\x3e\x26#160;\x3c/td\x3e\x3ctd class\x3d'DataTD form-view-data ui-helper-reset ui-widget-content'\x3e\x26#160;\x3c/td\x3e",
v="",z=["integer","number","currency"],y=0,w=0,A,C,x;for(u=1;u<=f;u++)v+=1===u?t:"\x3ctd class\x3d'CaptionTD form-view-label ui-widget-content'\x3e\x26#160;\x3c/td\x3e\x3ctd class\x3d'DataTD form-view-data ui-widget-content'\x3e\x26#160;\x3c/td\x3e";a(c.p.colModel).each(function(){(m=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,z)?y=Math.max(y,parseInt(this.width,10)):w=Math.max(w,parseInt(this.width,
10)))});A=0!==y?y:0!==w?w:0;r=a(c).jqGrid("getInd",b);a(c.p.colModel).each(function(b){g=this.name;C=!1;p=(m=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style\x3d'display:none'":"";x="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==g&&"subgrid"!==g&&"rn"!==g&&x){n=!1===r?"":g===c.p.ExpandColumn&&!0===c.p.treeGrid?a("td:eq("+b+")",c.rows[r]).text():a("td:eq("+b+")",c.rows[r]).html();C="right"===this.align&&0!==A?!0:!1;var d=a.extend({},{rowabove:!1,rowcontent:""},
this.formoptions||{}),s=parseInt(d.rowpos,10)||k+1,u=parseInt(2*(parseInt(d.colpos,10)||1),10);if(d.rowabove){var t=a("\x3ctr\x3e\x3ctd class\x3d'contentinfo' colspan\x3d'"+2*f+"'\x3e"+d.rowcontent+"\x3c/td\x3e\x3c/tr\x3e");a(e).append(t);t[0].rp=s}h=a(e).find("tr[rowpos\x3d"+s+"]");0===h.length&&(h=a("\x3ctr "+p+" rowpos\x3d'"+s+"'\x3e\x3c/tr\x3e").addClass("FormData").attr("id","trv_"+g),a(h).append(v),a(e).append(h),h[0].rp=s);a("td:eq("+(u-2)+")",h[0]).html("\x3cb\x3e"+(void 0===d.label?c.p.colNames[b]:
d.label)+"\x3c/b\x3e");a("td:eq("+(u-1)+")",h[0]).append("\x3cspan\x3e"+n+"\x3c/span\x3e").attr("id","v_"+g);C&&a("td:eq("+(u-1)+") span",h[0]).css({"text-align":"right",width:A+"px"});q[k]=b;k++}});0<k&&(b=a("\x3ctr class\x3d'FormData' style\x3d'display:none'\x3e\x3ctd class\x3d'CaptionTD'\x3e\x3c/td\x3e\x3ctd colspan\x3d'"+(2*f-1)+"' class\x3d'DataTD'\x3e\x3cinput class\x3d'FormElement' id\x3d'id_g' type\x3d'text' name\x3d'id' value\x3d'"+b+"'/\x3e\x3c/td\x3e\x3c/tr\x3e"),b[0].rp=k+99,a(e).append(b));
return q}function w(b,c){var d,e,f=0,g,h;if(h=a(c).jqGrid("getInd",b,!0))a("td",h).each(function(b){d=c.p.colModel[b].name;e=c.p.colModel[b].editrules&&!0===c.p.colModel[b].editrules.edithidden?!1:!0===c.p.colModel[b].hidden?!0:!1;"cb"!==d&&"subgrid"!==d&&"rn"!==d&&(g=d===c.p.ExpandColumn&&!0===c.p.treeGrid?a(this).text():a(this).html(),d=a.jgrid.jqID("v_"+d),a("#"+d+" span","#"+q).html(g),e&&a("#"+d,"#"+q).parents("tr:first").hide(),f++)}),0<f&&a("#id_g","#"+q).val(b)}function p(b,c){var d=c[1].length-
1;0===b?a("#pData","#"+q+"_2").addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",q+"_2").addClass("ui-state-disabled"):a("#pData","#"+q+"_2").removeClass("ui-state-disabled");b===d?a("#nData","#"+q+"_2").addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",q+"_2").addClass("ui-state-disabled"):a("#nData","#"+q+"_2").removeClass("ui-state-disabled")}function t(){var b=
a(m).jqGrid("getDataIDs"),c=a("#id_g","#"+q).val();return[a.inArray(c,b),b]}var m=this;if(m.grid&&z){var f=m.p.id,g="ViewGrid_"+a.jgrid.jqID(f),q="ViewTbl_"+a.jgrid.jqID(f),x="ViewGrid_"+f,c="ViewTbl_"+f,v={themodal:"viewmod"+f,modalhead:"viewhd"+f,modalcontent:"viewcnt"+f,scrollelm:g},h=a.isFunction(b[m.p.id].beforeInitData)?b[m.p.id].beforeInitData:!1,r=!0,n=1,u=0;d.recreateForm||a(m).data("viewProp")&&a.extend(b[a(this)[0].p.id],a(m).data("viewProp"));var y=isNaN(b[a(this)[0].p.id].dataheight)?
b[a(this)[0].p.id].dataheight:b[a(this)[0].p.id].dataheight+"px",C=isNaN(b[a(this)[0].p.id].datawidth)?b[a(this)[0].p.id].datawidth:b[a(this)[0].p.id].datawidth+"px",x=a("\x3cform name\x3d'FormPost' id\x3d'"+x+"' class\x3d'FormGrid' style\x3d'width:"+C+";overflow:auto;position:relative;height:"+y+";'\x3e\x3c/form\x3e"),A=a("\x3ctable id\x3d'"+c+"' class\x3d'EditTable' cellspacing\x3d'1' cellpadding\x3d'2' border\x3d'0' style\x3d'table-layout:fixed'\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e");a(m.p.colModel).each(function(){var a=
this.formoptions;n=Math.max(n,a?a.colpos||0:0);u=Math.max(u,a?a.rowpos||0:0)});a(x).append(A);h&&(r=h.call(m,x),void 0===r&&(r=!0));if(!1!==r){k(z,m,A,n);c="rtl"===m.p.direction?!0:!1;h="\x3ca id\x3d'"+(c?"nData":"pData")+"' class\x3d'fm-button ui-state-default ui-corner-left'\x3e\x3cspan class\x3d'ui-icon ui-icon-triangle-1-w'\x3e\x3c/span\x3e\x3c/a\x3e";r="\x3ca id\x3d'"+(c?"pData":"nData")+"' class\x3d'fm-button ui-state-default ui-corner-right'\x3e\x3cspan class\x3d'ui-icon ui-icon-triangle-1-e'\x3e\x3c/span\x3e\x3c/a\x3e";
y="\x3ca id\x3d'cData' class\x3d'fm-button ui-state-default ui-corner-all'\x3e"+d.bClose+"\x3c/a\x3e";if(0<u){var E=[];a.each(a(A)[0].rows,function(a,b){E[a]=b});E.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(E,function(b,c){a("tbody",A).append(c)})}d.gbox="#gbox_"+a.jgrid.jqID(f);x=a("\x3cdiv\x3e\x3c/div\x3e").append(x).append("\x3ctable border\x3d'0' class\x3d'EditTable' id\x3d'"+q+"_2'\x3e\x3ctbody\x3e\x3ctr id\x3d'Act_Buttons'\x3e\x3ctd class\x3d'navButton' width\x3d'"+d.labelswidth+
"'\x3e"+(c?r+h:h+r)+"\x3c/td\x3e\x3ctd class\x3d'EditButton'\x3e"+y+"\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e");a.jgrid.createModal(v,x,d,"#gview_"+a.jgrid.jqID(m.p.id),a("#gview_"+a.jgrid.jqID(m.p.id))[0]);c&&(a("#pData, #nData","#"+q+"_2").css("float","right"),a(".EditButton","#"+q+"_2").css("text-align","left"));d.viewPagerButtons||a("#pData, #nData","#"+q+"_2").hide();x=null;a("#"+v.themodal).keydown(function(c){if(27===c.which)return b[m.p.id].closeOnEscape&&a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),
{gb:d.gbox,jqm:d.jqModal,onClose:d.onClose,removemodal:b[m.p.id].removemodal,formprop:!b[m.p.id].recreateForm,form:b[m.p.id].form}),!1;if(!0===d.navkeys[0]){if(c.which===d.navkeys[1])return a("#pData","#"+q+"_2").trigger("click"),!1;if(c.which===d.navkeys[2])return a("#nData","#"+q+"_2").trigger("click"),!1}});d.closeicon=a.extend([!0,"left","ui-icon-close"],d.closeicon);!0===d.closeicon[0]&&a("#cData","#"+q+"_2").addClass("right"===d.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("\x3cspan class\x3d'ui-icon "+
d.closeicon[2]+"'\x3e\x3c/span\x3e");a.isFunction(d.beforeShowForm)&&d.beforeShowForm.call(m,a("#"+g));a.jgrid.viewModal("#"+a.jgrid.jqID(v.themodal),{gbox:"#gbox_"+a.jgrid.jqID(f),jqm:d.jqModal,overlay:d.overlay,modal:d.modal,onHide:function(b){a(m).data("viewProp",{top:parseFloat(a(b.w).css("top")),left:parseFloat(a(b.w).css("left")),width:a(b.w).width(),height:a(b.w).height(),dataheight:a("#"+g).height(),datawidth:a("#"+g).width()});b.w.remove();b.o&&b.o.remove()}});a(".fm-button:not(.ui-state-disabled)",
"#"+q+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});e();a("#cData","#"+q+"_2").click(function(){a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:"#gbox_"+a.jgrid.jqID(f),jqm:d.jqModal,onClose:d.onClose,removemodal:b[m.p.id].removemodal,formprop:!b[m.p.id].recreateForm,form:b[m.p.id].form});return!1});a("#nData","#"+q+"_2").click(function(){a("#FormError","#"+q).hide();var b=t();b[0]=parseInt(b[0],10);-1!==b[0]&&b[1][b[0]+1]&&(a.isFunction(d.onclickPgButtons)&&
d.onclickPgButtons.call(m,"next",a("#"+g),b[1][b[0]]),w(b[1][b[0]+1],m),a(m).jqGrid("setSelection",b[1][b[0]+1]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(m,"next",a("#"+g),b[1][b[0]+1]),p(b[0]+1,b));e();return!1});a("#pData","#"+q+"_2").click(function(){a("#FormError","#"+q).hide();var b=t();-1!==b[0]&&b[1][b[0]-1]&&(a.isFunction(d.onclickPgButtons)&&d.onclickPgButtons.call(m,"prev",a("#"+g),b[1][b[0]]),w(b[1][b[0]-1],m),a(m).jqGrid("setSelection",b[1][b[0]-1]),a.isFunction(d.afterclickPgButtons)&&
d.afterclickPgButtons.call(m,"prev",a("#"+g),b[1][b[0]-1]),p(b[0]-1,b));e();return!1});x=t();p(x[0],x)}}})},delGridRow:function(z,d){d=a.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,
serializeDelData:null,useDataProxy:!1},a.jgrid.del,d||{});b[a(this)[0].p.id]=d;return this.each(function(){var e=this;if(e.grid&&z){var k=a.isFunction(b[e.p.id].beforeShowForm),w=a.isFunction(b[e.p.id].afterShowForm),p=a.isFunction(b[e.p.id].beforeInitData)?b[e.p.id].beforeInitData:!1,t=e.p.id,m={},f=!0,g="DelTbl_"+a.jgrid.jqID(t),q,x,c,v,h="DelTbl_"+t,r={themodal:"delmod"+t,modalhead:"delhd"+t,modalcontent:"delcnt"+t,scrollelm:g};a.isArray(z)&&(z=z.join());if(void 0!==a("#"+a.jgrid.jqID(r.themodal))[0]){p&&
(f=p.call(e,a("#"+g)),void 0===f&&(f=!0));if(!1===f)return;a("#DelData\x3etd","#"+g).text(z);a("#DelError","#"+g).hide();!0===b[e.p.id].processing&&(b[e.p.id].processing=!1,a("#dData","#"+g).removeClass("ui-state-active"));k&&b[e.p.id].beforeShowForm.call(e,a("#"+g));a.jgrid.viewModal("#"+a.jgrid.jqID(r.themodal),{gbox:"#gbox_"+a.jgrid.jqID(t),jqm:b[e.p.id].jqModal,jqM:!1,overlay:b[e.p.id].overlay,modal:b[e.p.id].modal})}else{var n=isNaN(b[e.p.id].dataheight)?b[e.p.id].dataheight:b[e.p.id].dataheight+
"px",u=isNaN(d.datawidth)?d.datawidth:d.datawidth+"px",h="\x3cdiv id\x3d'"+h+"' class\x3d'formdata' style\x3d'width:"+u+";overflow:auto;position:relative;height:"+n+";'\x3e\x3ctable class\x3d'DelTable'\x3e\x3ctbody\x3e",h=h+"\x3ctr id\x3d'DelError' style\x3d'display:none'\x3e\x3ctd class\x3d'ui-state-error'\x3e\x3c/td\x3e\x3c/tr\x3e",h=h+("\x3ctr id\x3d'DelData' style\x3d'display:none'\x3e\x3ctd \x3e"+z+"\x3c/td\x3e\x3c/tr\x3e"),h=h+('\x3ctr\x3e\x3ctd class\x3d"delmsg" style\x3d"white-space:pre;"\x3e'+
b[e.p.id].msg+"\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd \x3e\x26#160;\x3c/td\x3e\x3c/tr\x3e"),h=h+"\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",h=h+("\x3ctable cellspacing\x3d'0' cellpadding\x3d'0' border\x3d'0' class\x3d'EditTable' id\x3d'"+g+"_2'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3e\x3chr class\x3d'ui-widget-content' style\x3d'margin:1px'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd class\x3d'DelButton EditButton'\x3e"+("\x3ca id\x3d'dData' class\x3d'fm-button ui-state-default ui-corner-all'\x3e"+d.bSubmit+
"\x3c/a\x3e")+"\x26#160;"+("\x3ca id\x3d'eData' class\x3d'fm-button ui-state-default ui-corner-all'\x3e"+d.bCancel+"\x3c/a\x3e")+"\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e");d.gbox="#gbox_"+a.jgrid.jqID(t);a.jgrid.createModal(r,h,d,"#gview_"+a.jgrid.jqID(e.p.id),a("#gview_"+a.jgrid.jqID(e.p.id))[0]);p&&(f=p.call(e,a(h)),void 0===f&&(f=!0));if(!1===f)return;a(".fm-button","#"+g+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});d.delicon=
a.extend([!0,"left","ui-icon-scissors"],b[e.p.id].delicon);d.cancelicon=a.extend([!0,"left","ui-icon-cancel"],b[e.p.id].cancelicon);!0===d.delicon[0]&&a("#dData","#"+g+"_2").addClass("right"===d.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("\x3cspan class\x3d'ui-icon "+d.delicon[2]+"'\x3e\x3c/span\x3e");!0===d.cancelicon[0]&&a("#eData","#"+g+"_2").addClass("right"===d.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("\x3cspan class\x3d'ui-icon "+d.cancelicon[2]+
"'\x3e\x3c/span\x3e");a("#dData","#"+g+"_2").click(function(){var f=[!0,""],h,k=a("#DelData\x3etd","#"+g).text();m={};a.isFunction(b[e.p.id].onclickSubmit)&&(m=b[e.p.id].onclickSubmit.call(e,b[e.p.id],k)||{});a.isFunction(b[e.p.id].beforeSubmit)&&(f=b[e.p.id].beforeSubmit.call(e,k));if(f[0]&&!b[e.p.id].processing){b[e.p.id].processing=!0;c=e.p.prmNames;q=a.extend({},b[e.p.id].delData,m);v=c.oper;q[v]=c.deloper;x=c.id;k=String(k).split(",");if(!k.length)return!1;for(h in k)k.hasOwnProperty(h)&&(k[h]=
a.jgrid.stripPref(e.p.idPrefix,k[h]));q[x]=k.join();a(this).addClass("ui-state-active");h=a.extend({url:b[e.p.id].url||a(e).jqGrid("getGridParam","editurl"),type:b[e.p.id].mtype,data:a.isFunction(b[e.p.id].serializeDelData)?b[e.p.id].serializeDelData.call(e,q):q,complete:function(c,h){var m;a("#dData","#"+g+"_2").removeClass("ui-state-active");300<=c.status&&304!==c.status?(f[0]=!1,a.isFunction(b[e.p.id].errorTextFormat)?f[1]=b[e.p.id].errorTextFormat.call(e,c):f[1]=h+" Status: '"+c.statusText+"'. Error code: "+
c.status):a.isFunction(b[e.p.id].afterSubmit)&&(f=b[e.p.id].afterSubmit.call(e,c,q));if(!1===f[0])a("#DelError\x3etd","#"+g).html(f[1]),a("#DelError","#"+g).show();else{if(b[e.p.id].reloadAfterSubmit&&"local"!==e.p.datatype)a(e).trigger("reloadGrid");else{if(!0===e.p.treeGrid)try{a(e).jqGrid("delTreeNode",e.p.idPrefix+k[0])}catch(n){}else for(m=0;m<k.length;m++)a(e).jqGrid("delRowData",e.p.idPrefix+k[m]);e.p.selrow=null;e.p.selarrrow=[]}a.isFunction(b[e.p.id].afterComplete)&&setTimeout(function(){b[e.p.id].afterComplete.call(e,
c,k)},500)}b[e.p.id].processing=!1;f[0]&&a.jgrid.hideModal("#"+a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:d.jqModal,onClose:b[e.p.id].onClose})}},a.jgrid.ajaxOptions,b[e.p.id].ajaxDelOptions);h.url||b[e.p.id].useDataProxy||(a.isFunction(e.p.dataProxy)?b[e.p.id].useDataProxy=!0:(f[0]=!1,f[1]+=" "+a.jgrid.errors.nourl));f[0]&&(b[e.p.id].useDataProxy?(h=e.p.dataProxy.call(e,h,"del_"+e.p.id),void 0===h&&(h=[!0,""]),!1===h[0]?(f[0]=!1,f[1]=h[1]||"Error deleting the selected row!"):a.jgrid.hideModal("#"+
a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:d.jqModal,onClose:b[e.p.id].onClose})):"clientArray"===h.url?(q=h.data,h.complete({status:200,statusText:""},"")):a.ajax(h))}!1===f[0]&&(a("#DelError\x3etd","#"+g).html(f[1]),a("#DelError","#"+g).show());return!1});a("#eData","#"+g+"_2").click(function(){a.jgrid.hideModal("#"+a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),jqm:b[e.p.id].jqModal,onClose:b[e.p.id].onClose});return!1});k&&b[e.p.id].beforeShowForm.call(e,a("#"+g));a.jgrid.viewModal("#"+
a.jgrid.jqID(r.themodal),{gbox:"#gbox_"+a.jgrid.jqID(t),jqm:b[e.p.id].jqModal,overlay:b[e.p.id].overlay,modal:b[e.p.id].modal})}w&&b[e.p.id].afterShowForm.call(e,a("#"+g));!0===b[e.p.id].closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(r.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(b,d,e,k,w,p,t){d=a.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",
refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},a.jgrid.nav,d||{});return this.each(function(){if(!this.nav){var m={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},f=this,g;if(f.grid&&"string"===typeof b){void 0===a("#"+m.themodal)[0]&&
(d.alerttop||d.alertleft||(void 0!==window.innerWidth?(d.alertleft=window.innerWidth,d.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(d.alertleft=document.documentElement.clientWidth,d.alerttop=document.documentElement.clientHeight):(d.alertleft=1024,d.alerttop=768),d.alertleft=d.alertleft/2-parseInt(d.alertwidth,10)/2,d.alerttop=d.alerttop/2-25),a.jgrid.createModal(m,"\x3cdiv\x3e"+d.alerttext+
"\x3c/div\x3e\x3cspan tabindex\x3d'0'\x3e\x3cspan tabindex\x3d'-1' id\x3d'jqg_alrt'\x3e\x3c/span\x3e\x3c/span\x3e",{gbox:"#gbox_"+a.jgrid.jqID(f.p.id),jqModal:!0,drag:!0,resize:!0,caption:d.alertcap,top:d.alerttop,left:d.alertleft,width:d.alertwidth,height:d.alertheight,closeOnEscape:d.closeOnEscape,zIndex:d.alertzIndex},"#gview_"+a.jgrid.jqID(f.p.id),a("#gbox_"+a.jgrid.jqID(f.p.id))[0],!0));var q=1,x,c=function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},v=function(){a(this).removeClass("ui-state-hover")};
d.cloneToTop&&f.p.toppager&&(q=2);for(x=0;x<q;x++){var h=a("\x3ctable cellspacing\x3d'0' cellpadding\x3d'0' border\x3d'0' class\x3d'ui-pg-table navtable' style\x3d'float:left;table-layout:auto;'\x3e\x3ctbody\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e"),r,n;0===x?(r=b,n=f.p.id,r===f.p.toppager&&(n+="_top",q=1)):(r=f.p.toppager,n=f.p.id+"_top");"rtl"===f.p.direction&&a(h).attr("dir","rtl").css("float","right");d.add&&(k=k||{},g=a("\x3ctd class\x3d'ui-pg-button ui-corner-all'\x3e\x3c/td\x3e"),
a(g).append("\x3cdiv class\x3d'ui-pg-div'\x3e\x3cspan class\x3d'ui-icon "+d.addicon+"'\x3e\x3c/span\x3e"+d.addtext+"\x3c/div\x3e"),a("tr",h).append(g),a(g,h).attr({title:d.addtitle||"",id:k.id||"add_"+n}).click(function(){a(this).hasClass("ui-state-disabled")||(a.isFunction(d.addfunc)?d.addfunc.call(f):a(f).jqGrid("editGridRow","new",k));return!1}).hover(c,v),g=null);d.edit&&(g=a("\x3ctd class\x3d'ui-pg-button ui-corner-all'\x3e\x3c/td\x3e"),e=e||{},a(g).append("\x3cdiv class\x3d'ui-pg-div'\x3e\x3cspan class\x3d'ui-icon "+
d.editicon+"'\x3e\x3c/span\x3e"+d.edittext+"\x3c/div\x3e"),a("tr",h).append(g),a(g,h).attr({title:d.edittitle||"",id:e.id||"edit_"+n}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=f.p.selrow;b?a.isFunction(d.editfunc)?d.editfunc.call(f,b):a(f).jqGrid("editGridRow",b,e):(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(f.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(c,v),g=null);d.view&&(g=a("\x3ctd class\x3d'ui-pg-button ui-corner-all'\x3e\x3c/td\x3e"),t=
t||{},a(g).append("\x3cdiv class\x3d'ui-pg-div'\x3e\x3cspan class\x3d'ui-icon "+d.viewicon+"'\x3e\x3c/span\x3e"+d.viewtext+"\x3c/div\x3e"),a("tr",h).append(g),a(g,h).attr({title:d.viewtitle||"",id:t.id||"view_"+n}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=f.p.selrow;b?a.isFunction(d.viewfunc)?d.viewfunc.call(f,b):a(f).jqGrid("viewGridRow",b,t):(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(f.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(c,v),g=null);
d.del&&(g=a("\x3ctd class\x3d'ui-pg-button ui-corner-all'\x3e\x3c/td\x3e"),w=w||{},a(g).append("\x3cdiv class\x3d'ui-pg-div'\x3e\x3cspan class\x3d'ui-icon "+d.delicon+"'\x3e\x3c/span\x3e"+d.deltext+"\x3c/div\x3e"),a("tr",h).append(g),a(g,h).attr({title:d.deltitle||"",id:w.id||"del_"+n}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b;f.p.multiselect?(b=f.p.selarrrow,0===b.length&&(b=null)):b=f.p.selrow;b?a.isFunction(d.delfunc)?d.delfunc.call(f,b):a(f).jqGrid("delGridRow",b,w):(a.jgrid.viewModal("#"+
m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(f.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(c,v),g=null);(d.add||d.edit||d.del||d.view)&&a("tr",h).append("\x3ctd class\x3d'ui-pg-button ui-state-disabled' style\x3d'width:4px;'\x3e\x3cspan class\x3d'ui-separator'\x3e\x3c/span\x3e\x3c/td\x3e");d.search&&(g=a("\x3ctd class\x3d'ui-pg-button ui-corner-all'\x3e\x3c/td\x3e"),p=p||{},a(g).append("\x3cdiv class\x3d'ui-pg-div'\x3e\x3cspan class\x3d'ui-icon "+d.searchicon+"'\x3e\x3c/span\x3e"+d.searchtext+
"\x3c/div\x3e"),a("tr",h).append(g),a(g,h).attr({title:d.searchtitle||"",id:p.id||"search_"+n}).click(function(){a(this).hasClass("ui-state-disabled")||(a.isFunction(d.searchfunc)?d.searchfunc.call(f,p):a(f).jqGrid("searchGrid",p));return!1}).hover(c,v),p.showOnLoad&&!0===p.showOnLoad&&a(g,h).click(),g=null);d.refresh&&(g=a("\x3ctd class\x3d'ui-pg-button ui-corner-all'\x3e\x3c/td\x3e"),a(g).append("\x3cdiv class\x3d'ui-pg-div'\x3e\x3cspan class\x3d'ui-icon "+d.refreshicon+"'\x3e\x3c/span\x3e"+d.refreshtext+
"\x3c/div\x3e"),a("tr",h).append(g),a(g,h).attr({title:d.refreshtitle||"",id:"refresh_"+n}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(d.beforeRefresh)&&d.beforeRefresh.call(f);f.p.search=!1;f.p.resetsearch=!0;try{if("currentfilter"!==d.refreshstate){var b=f.p.id;f.p.postData.filters="";try{a("#fbox_"+a.jgrid.jqID(b)).jqFilter("resetFilter")}catch(c){}a.isFunction(f.clearToolbar)&&f.clearToolbar.call(f,!1)}}catch(e){}switch(d.refreshstate){case "firstpage":a(f).trigger("reloadGrid",
[{page:1}]);break;case "current":case "currentfilter":a(f).trigger("reloadGrid",[{current:!0}])}a.isFunction(d.afterRefresh)&&d.afterRefresh.call(f)}return!1}).hover(c,v),g=null);g=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("\x3cdiv id\x3d'testpg2' class\x3d'ui-jqgrid ui-widget ui-widget-content' style\x3d'font-size:"+g+";visibility:hidden;' \x3e\x3c/div\x3e");g=a(h).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(r+"_"+d.position,r).append(h);f.p._nvtd&&(g>f.p._nvtd[0]&&
(a(r+"_"+d.position,r).width(g),f.p._nvtd[0]=g),f.p._nvtd[1]=g);h=g=g=null;this.nav=!0}}}})},navButtonAdd:function(b,d){d=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},d||{});return this.each(function(){if(this.grid){"string"===typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var e=a(".navtable",b)[0],k=this;if(e&&(!d.id||void 0===a("#"+a.jgrid.jqID(d.id),e)[0])){var w=a("\x3ctd\x3e\x3c/td\x3e");"NONE"===d.buttonicon.toString().toUpperCase()?
a(w).addClass("ui-pg-button ui-corner-all").append("\x3cdiv class\x3d'ui-pg-div'\x3e"+d.caption+"\x3c/div\x3e"):a(w).addClass("ui-pg-button ui-corner-all").append("\x3cdiv class\x3d'ui-pg-div'\x3e\x3cspan class\x3d'ui-icon "+d.buttonicon+"'\x3e\x3c/span\x3e"+d.caption+"\x3c/div\x3e");d.id&&a(w).attr("id",d.id);"first"===d.position?0===e.rows[0].cells.length?a("tr",e).append(w):a("tr td:eq(0)",e).before(w):a("tr",e).append(w);a(w,e).attr("title",d.title||"").click(function(b){a(this).hasClass("ui-state-disabled")||
a.isFunction(d.onClickButton)&&d.onClickButton.call(k,b);return!1}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(b,d){d=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},d||{});return this.each(function(){if(this.grid){"string"===typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var e=a(".navtable",b)[0];if(e){var k="\x3ctd class\x3d'ui-pg-button ui-state-disabled' style\x3d'width:4px;'\x3e\x3cspan class\x3d'"+
d.sepclass+"'\x3e\x3c/span\x3e"+d.sepcontent+"\x3c/td\x3e";"first"===d.position?0===e.rows[0].cells.length?a("tr",e).append(k):a("tr td:eq(0)",e).before(k):a("tr",e).append(k)}}})},GridToForm:function(b,d){return this.each(function(){var e=this,k;if(e.grid){var w=a(e).jqGrid("getRowData",b);if(w)for(k in w)w.hasOwnProperty(k)&&(a("[name\x3d"+a.jgrid.jqID(k)+"]",d).is("input:radio")||a("[name\x3d"+a.jgrid.jqID(k)+"]",d).is("input:checkbox")?a("[name\x3d"+a.jgrid.jqID(k)+"]",d).each(function(){if(a(this).val()==
w[k])a(this)[e.p.useProp?"prop":"attr"]("checked",!0);else a(this)[e.p.useProp?"prop":"attr"]("checked",!1)}):a("[name\x3d"+a.jgrid.jqID(k)+"]",d).val(w[k]))}})},FormToGrid:function(b,d,e,k){return this.each(function(){if(this.grid){e||(e="set");k||(k="first");var w=a(d).serializeArray(),p={};a.each(w,function(a,b){p[b.name]=b.value});"add"===e?a(this).jqGrid("addRowData",b,p,k):"set"===e&&a(this).jqGrid("setRowData",b,p)}})}})})(jQuery);