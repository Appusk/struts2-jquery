/*

 jquery.tree.struts2.js

 Integration of trees with struts 2

 Requires use of jquery.struts2.js

 Copyright (c) 2010 Johannes Geppert http://www.jgeppert.com

 Dual licensed under the MIT and GPL licenses:
   http://www.opensource.org/licenses/mit-license.php
   http://www.gnu.org/licenses/gpl.html

*/
'use strict';(function(b){b.struts2_jquery_tree={handler:{show_checkboxes:"_s2j_show_checkboxes",hide_checkboxes:"_s2j_hide_checkboxes",check_checkboxes:"_s2j_check_checkboxes",uncheck_checkboxes:"_s2j_uncheck_checkboxes",toggle_checkboxes:"_s2j_toggle_all",search:"_s2j_tree_search",clear_search:"_s2j_tree_clear_search"},tree:function(c,a){var d=this,m=null;d.loadAtOnce||d.require("js/base/jquery.cookie"+d.minSuffix+".js");m=b.scriptPath?b.scriptPath:"";d.require("js/jstree/jquery.hotkeys"+d.minSuffix+
".js");d.require("js/jstree/jquery.jstree"+d.minSuffix+".js",function(){b.jstree.defaults.core.themes.url=!0;b.jstree.defaults.core.themes.dir=m+"js/jstree/themes"});a.plugins=null!=b.jstree.defaults.plugins?b.jstree.defaults.plugins.slice():[];a.core={};a.treetheme?(a.core.themes={},a.core.themes.name=a.treetheme,a.core.themes.dots=a.dots,a.core.themes.icons=a.icons,a.treethemeVariant&&(a.core.themes.variant=a.treethemeVariant),a.treethemeResponsive&&(a.core.themes.responsive=a.treethemeResponsive)):
a.plugins.push("themeroller");a.contextmenu&&(a.core.check_callback=!0,a.plugins.push("contextmenu"));a.types&&a.plugins.push("types");a.checkbox&&(a.plugins.push("checkbox"),a.checkbox={override_ui:!0,real_checkboxes:!0,real_checkboxes_names:function(b){return[a.name,b.attr?b.attr("id"):0]}},a.two_state&&(a.checkbox.two_state=!0),c.bind("loaded.jstree",function(a,d){c.find("li").each(function(a){1==b(this).data("checked")&&c.jstree("check_node",b(this))})}),c.on("changed.jstree",function(f,e){b(d.escId(a.id+
"_hidden")).val(c.jstree("get_checked",!1))}),b(d.escId(a.id+"_hidden")).val(c.jstree("get_checked",!1)));a.searchTopic&&a.searchElementId&&(a.search={},a.plugins.push("search"),d.subscribeTopics(c,a.searchTopic,d.handler.search,a),a.searchClearTopic&&d.subscribeTopics(c,a.searchClearTopic,d.handler.clear_search,a));a.pluginsconf&&b.each(a.pluginsconf,function(b,c){-1===a.plugins.indexOf(b)&&a.plugins.push(b);a[b]=c||{}});a.toogleAllTopics&&d.subscribeTopics(c,a.toogleAllTopics,d.handler.toggle_checkboxes,
a);a.checkShowTopics&&d.subscribeTopics(c,a.checkShowTopics,d.handler.show_checkboxes,a);a.checkHideTopics&&d.subscribeTopics(c,a.checkHideTopics,d.handler.hide_checkboxes,a);a.checkAllTopics&&d.subscribeTopics(c,a.checkAllTopics,d.handler.check_checkboxes,a);a.uncheckAllTopics&&d.subscribeTopics(c,a.uncheckAllTopics,d.handler.uncheck_checkboxes,a);a.url&&(a.core.data={},a.core.data.url=a.url,a.core.data.data=function(a){return{id:"#"===a.id?"":a.id}},a.onsuc&&(a.core.data.success=function(f,e,g){b.each(a.onsuc.split(","),
function(b,h){var k={};k.data=f;k.status=e;k.request=g;d.publishTopic(c,h,k);d.publishTopic(c,a.onalw,k)})}),a.oncom&&(a.core.data.complete=function(f,e){b.each(a.oncom.split(","),function(b,l){var h={};h.request=f;h.status=e;d.publishTopic(c,l,h);d.publishTopic(c,a.onalw,h)})}),a.onerr&&(a.core.data.error=function(f,e,g){b.each(a.onerr.split(","),function(b,h){var k={};k.request=f;k.status=e;k.error=g;d.publishTopic(c,h,k);d.publishTopic(c,a.onalw,k)})}));c.on("select_node.jstree",function(f,e){var g=
{};g.data=e;g.event=f;a.onclick&&d.publishTopic(c,a.onclick,g);if(e.node.a_attr.href&&"javascript:void(0)"!==e.node.a_attr.href&&"#"!==e.node.a_attr.href)window.open(e.node.a_attr.href,"_blank");else{var l=e.node.a_attr.id,h=b(d.escId(l)),g=h.data("targets");void 0===g&&(g=a.nodeTargets);g&&b.each(g.split(","),function(c,e){if(b(d.escId(e)).isSubscribed("_sj_action_"+l+e))h.publish("_sj_action_"+l+e);else{var f=a.nodeHref;a.nodeHrefParamName&&(f=d.addParam(f,a.nodeHrefParamName+"\x3d"+l));b(d.escId(e)).load(f)}return!1})}});
if(a.onSearchCompleteTopics)c.on("search.jstree",function(b,e){d.publishTopic(c,a.onSearchCompleteTopics,{data:e,event:b})});if(a.onSearchClearTopics)c.on("clear_search.jstree",function(b,e){d.publishTopic(c,a.onSearchClearTopics,{data:e,event:b})});a.openload&&c.bind("loaded.jstree",function(a,b){c.jstree("open_all")});a.openrefresh&&c.bind("refresh.jstree",function(a,b){c.jstree("open_all")});a.animation&&(a.core={},a.core.animation=a.animation);c.jstree(a)},treeitem:function(b,a){this.anchor(b,
a)}};b.subscribeHandler(b.struts2_jquery_tree.handler.show_checkboxes,function(c,a){b(this).jstree("show_checkboxes")});b.subscribeHandler(b.struts2_jquery_tree.handler.hide_checkboxes,function(c,a){b(this).jstree("hide_checkboxes")});b.subscribeHandler(b.struts2_jquery_tree.handler.toggle_checkboxes,function(c,a){b(this).jstree("toggle_checkboxes")});b.subscribeHandler(b.struts2_jquery_tree.handler.check_checkboxes,function(c,a){b(this).jstree("check_all")});b.subscribeHandler(b.struts2_jquery_tree.handler.uncheck_checkboxes,
function(c,a){b(this).jstree("uncheck_all")});b.subscribeHandler(b.struts2_jquery_tree.handler.search,function(c,a){b(this).jstree("search",b(b.struts2_jquery.escId(c.data.searchElementId)).val())});b.subscribeHandler(b.struts2_jquery_tree.handler.clear_search,function(c,a){b(this).jstree("clear_search")});b.extend(!0,b.struts2_jquery_tree,b.struts2_jquery);b.struts2_jquery_tree.debugPrefix="[struts2_jquery_tree] "})(jQuery);