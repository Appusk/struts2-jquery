/*

 jquery.tree.struts2.js

 Integration of trees with struts 2

 Requires use of jquery.struts2.js

 Copyright (c) 2010 Johannes Geppert http://www.jgeppert.com

 Dual licensed under the MIT and GPL licenses:
   http://www.opensource.org/licenses/mit-license.php
   http://www.gnu.org/licenses/gpl.html

*/
'use strict';(function(b){b.struts2_jquery_tree={handler:{show_checkboxes:"_s2j_show_checkboxes",hide_checkboxes:"_s2j_hide_checkboxes",check_checkboxes:"_s2j_check_checkboxes",uncheck_checkboxes:"_s2j_uncheck_checkboxes",toggle_checkboxes:"_s2j_toggle_all"},tree:function(d,a){var c=this,m=null;c.loadAtOnce||c.require("js/base/jquery.cookie"+c.minSuffix+".js");m=b.scriptPath?b.scriptPath:"";c.require("js/jstree/jquery.hotkeys"+c.minSuffix+".js");c.require("js/jstree/jquery.jstree"+c.minSuffix+".js",
function(){b.jstree.defaults.core.themes.url=!0;b.jstree.defaults.core.themes.dir=m+"js/jstree/themes"});a.plugins=null!=b.jstree.defaults.plugins?b.jstree.defaults.plugins:[];a.core={};a.treetheme?(a.core.themes={},a.core.themes.name=a.treetheme,a.core.themes.dots=a.dots,a.core.themes.icons=a.icons):a.plugins.push("themeroller");a.contextmenu&&(a.core.check_callback=!0,a.plugins.push("contextmenu"));a.types&&a.plugins.push("types");a.checkbox&&(a.plugins.push("checkbox"),a.checkbox={override_ui:!0,
real_checkboxes:!0,real_checkboxes_names:function(b){return[a.name,b.attr?b.attr("id"):0]}},a.two_state&&(a.checkbox.two_state=!0),d.bind("loaded.jstree",function(a,c){d.find("li").each(function(a){1==b(this).data("checked")&&d.jstree("check_node",b(this))})}),d.on("changed.jstree",function(k,e){b(c.escId(a.id+"_hidden")).val(d.jstree("get_checked",!1))}),b(c.escId(a.id+"_hidden")).val(d.jstree("get_checked",!1)));a.toogleAllTopics&&c.subscribeTopics(d,a.toogleAllTopics,c.handler.toggle_checkboxes,
a);a.checkShowTopics&&c.subscribeTopics(d,a.checkShowTopics,c.handler.show_checkboxes,a);a.checkHideTopics&&c.subscribeTopics(d,a.checkHideTopics,c.handler.hide_checkboxes,a);a.checkAllTopics&&c.subscribeTopics(d,a.checkAllTopics,c.handler.check_checkboxes,a);a.uncheckAllTopics&&c.subscribeTopics(d,a.uncheckAllTopics,c.handler.uncheck_checkboxes,a);a.url&&(a.core.data={},a.core.data.url=a.url,a.core.data.data=function(a){return{id:"#"===a.id?"":a.id}},a.onsuc&&(a.core.data.success=function(k,e,f){b.each(a.onsuc.split(","),
function(b,g){var h={};h.data=k;h.status=e;h.request=f;c.publishTopic(d,g,h);c.publishTopic(d,a.onalw,h)})}),a.oncom&&(a.core.data.complete=function(k,e){b.each(a.oncom.split(","),function(b,l){var g={};g.request=k;g.status=e;c.publishTopic(d,l,g);c.publishTopic(d,a.onalw,g)})}),a.onerr&&(a.core.data.error=function(k,e,f){b.each(a.onerr.split(","),function(b,g){var h={};h.request=k;h.status=e;h.error=f;c.publishTopic(d,g,h);c.publishTopic(d,a.onalw,h)})}));d.on("select_node.jstree",function(k,e){var f=
{};f.data=e;f.event=k;a.onclick&&c.publishTopic(d,a.onclick,f);if(e.node.a_attr.href&&"javascript:void(0)"!==e.node.a_attr.href&&"#"!==e.node.a_attr.href)window.open(e.node.a_attr.href,"_blank");else{var l=e.node.a_attr.id,g=b(c.escId(l)),f=g.data("targets");void 0===f&&(f=a.nodeTargets);f&&b.each(f.split(","),function(d,e){if(b(c.escId(e)).isSubscribed("_sj_action_"+l+e))g.publish("_sj_action_"+l+e);else{var f=a.nodeHref;a.nodeHrefParamName&&(f=c.addParam(f,a.nodeHrefParamName+"\x3d"+l));b(c.escId(e)).load(f)}return!1})}});
a.openload&&d.bind("loaded.jstree",function(a,b){d.jstree("open_all")});a.openrefresh&&d.bind("refresh.jstree",function(a,b){d.jstree("open_all")});a.animation&&(a.core={},a.core.animation=a.animation);d.jstree(a)},treeitem:function(b,a){this.anchor(b,a)}};b.subscribeHandler(b.struts2_jquery_tree.handler.show_checkboxes,function(d,a){b(this).jstree("show_checkboxes")});b.subscribeHandler(b.struts2_jquery_tree.handler.hide_checkboxes,function(d,a){b(this).jstree("hide_checkboxes")});b.subscribeHandler(b.struts2_jquery_tree.handler.toggle_checkboxes,
function(d,a){b(this).jstree("toggle_checkboxes")});b.subscribeHandler(b.struts2_jquery_tree.handler.check_checkboxes,function(d,a){b(this).jstree("check_all")});b.subscribeHandler(b.struts2_jquery_tree.handler.uncheck_checkboxes,function(d,a){b(this).jstree("uncheck_all")});b.extend(!0,b.struts2_jquery_tree,b.struts2_jquery);b.struts2_jquery_tree.debugPrefix="[struts2_jquery_tree] "})(jQuery);